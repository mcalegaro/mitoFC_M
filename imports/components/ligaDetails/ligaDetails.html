<div ng-include="'/client/templates/message.html'"></div>
<div id="ligaDetail">
    <div ng-if="liga.liga != null">
        <div id="divLigaPontosCorridos" data-ng-show="!liga.chaves_mata_mata">
            <div id="divMenu" class="list-group">
                <div id="divLiga" class="list-group-item inlineDiv">
                    <liga-info class="fullW" ng-init="liga.liga.imagem = liga.liga.url_flamula_png" liga="liga.liga"></liga-info>
                    <div>
                        <div id="selectButton" class="dropdown">
                            <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true"
                                aria-expanded="true">
                                <div ng-switch="orderProp" style="display: inline-block">
                                    <div class="glyphicon glyphicon-star" ng-switch-when="pontos.campeonato"></div>
                                    <div class="glyphicon glyphicon-step-backward" ng-switch-when="pontos.rodada"></div>
                                    <div class="glyphicon glyphicon-star-empty" ng-switch-when="pontos.parcial"></div>
                                    <div class="glyphicon glyphicon-calendar" ng-switch-when="pontos.mes"></div>
                                    <div class="glyphicon glyphicon-euro" ng-switch-when="patrimonio"></div>
                                </div>
                                <div class="caret"></div>
                            </button>
                            <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenu1">
                                <li><a ng-click="$ctrl.setOrder('pontos.campeonato')"><span class="glyphicon glyphicon-star"></span> Campeonato</a></li>
                                <li><a ng-click="$ctrl.setOrder('pontos.parcial')"><span class="glyphicon glyphicon-star-empty"></span> Parciais</a></li>
                                <li><a ng-click="$ctrl.setOrder('pontos.rodada')"><span class="glyphicon glyphicon-step-backward"></span> Última Rodada</a></li>
                                <li><a ng-click="$ctrl.setOrder('pontos.mes')"><span class="glyphicon glyphicon-calendar"></span> Mensal</a></li>
                                <li><a ng-click="$ctrl.setOrder('patrimonio')"><span class="glyphicon glyphicon-euro"></span> Patrimônio</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="list-group">
                <a class="list-group-item inlineDiv" ui-sref="timeDetails({ slug: time.slug })" ng-repeat="time in liga.times | orderBy:[orderProp,'pontos.campeonato']:true">
                    <div class="classificacao">
                        <div>
                            {{$index+1}}<sup><u>o</u></sup>
                        </div>
                        <div>
                            <div ng-switch="orderProp">
                                <div ng-switch-when="pontos.campeonato">
                                    <div ng-init="statusMercado.status_mercado == 1 ? diff = time.variacao.campeonato : diff = time.ranking.campeonato - $index - 1"
                                        ng-up-down>
                                    </div>
                                </div>
                                <div ng-switch-when="patrimonio">
                                    <div ng-init="diff = time.variacao.patrimonio" ng-up-down>
                                    </div>
                                </div>
                                <div ng-switch-when="pontos.mes">
                                    <div ng-init="statusMercado.status_mercado == 1 ? diff = time.variacao.mes : diff = time.ranking.mes - $index - 1" ng-up-down>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="imgComp">
                        <img height="35" ng-src="{{time.url_escudo_png}}" onerror="this.src='http://www.freeiconspng.com/uploads/flat-shield-icon-17.png'"
                        />
                        <img height="18" ng-src="{{time.foto_perfil}}" style="border-radius: 25px; position: relative; left: -30px; top: 10px;" onerror="this.src='http://www.freeiconspng.com/uploads/customers-icon-3.png'"
                        />
                    </div>
                    <div class="fullW">
                        <div><b>{{time.nome}}</b></div>
                        <div>{{time.nome_cartola}}</div>
                    </div>
                    <div class="right">
                        <div ng-switch="orderProp">
                            <div ng-switch-when="pontos.campeonato">
                                <div class="pontuacao" ng-style="time.pontos.campeonato < 0 && {'color':'red'}">
                                    {{time.pontos.campeonato | number:2}}
                                </div>
                                <div ng-if="statusMercado.status_mercado == 2">{{time.pontos.atletas}}/12</div>
                            </div>
                            <div ng-switch-when="pontos.rodada">
                                <div class="pontuacao" ng-style="time.pontos.rodada < 0 && {'color':'red'}">
                                    {{time.pontos.rodada | number:2}}
                                </div>
                            </div>
                            <div ng-switch-when="pontos.parcial">
                                <div class="pontuacao" ng-style="time.pontos.parcial < 0 && {'color':'red'}">
                                    {{time.pontos.parcial | number:2}}
                                </div>
                                <div>{{time.pontos.atletas}}/12</div>
                            </div>
                            <div ng-switch-when="pontos.mes">
                                <div class="pontuacao" ng-style="time.pontos.mes < 0 && {'color':'red'}">
                                    {{time.pontos.mes | number:2}}
                                </div>
                                <div ng-if="statusMercado.status_mercado == 2">{{time.pontos.atletas}}/12</div>
                            </div>
                            <div class="pontuacao" ng-switch-when="patrimonio">{{time.patrimonio | number:2}}
                            </div>
                        </div>
                    </div>
                </a>
            </div>
        </div>
        <div id="divLigaMataMata" data-ng-show="liga.chaves_mata_mata" data-ng-init="ini=liga.liga.inicio_rodada">
            <div data-ng-repeat="rodada in [ini+4, ini+3, ini+2, ini+1, ini]">
                <data-ng-show data-ng-show="statusMercado.rodada_atual >= rodada">
                    <div class="list-group-item">
                        <!-- {{rodada}}<sup><u>a</u></sup> rodada - -->
                        <h3>
                            <data-ng-show data-ng-show="{{liga.chaves_mata_mata[rodada][0].tipo_fase=='P'}}">
                                Primeira Fase
                            </data-ng-show>
                            <data-ng-show data-ng-show="{{liga.chaves_mata_mata[rodada][0].tipo_fase=='O'}}">
                                Oitavas de Final
                            </data-ng-show>
                            <data-ng-show data-ng-show="{{liga.chaves_mata_mata[rodada][0].tipo_fase=='Q'}}">
                                Quartas de Final
                            </data-ng-show>
                            <data-ng-show data-ng-show="{{liga.chaves_mata_mata[rodada][0].tipo_fase=='S'}}">
                                Semi-finais
                            </data-ng-show>
                            <data-ng-show data-ng-show="{{liga.chaves_mata_mata[rodada][0].tipo_fase=='F'}}">
                                Finais
                            </data-ng-show>
                        </h3>
                    </div>
                    <div data-ng-repeat="partida in liga.chaves_mata_mata[rodada]">
                        <div class="list-group-item">
                            <div id="flex" class="inlineDiv">
                                <div id="mandante">
                                    <!-- $..phoneNumbers[?(@.type=="iPhone")] -->
                                    <!-- {{liga.times.forEach(function(time){console.info(time.nome)})}} -->
                                    {{getTimeById(partida.time_mandante_id)}}
                                    <!-- [*][?(time_id==partida.time_mandante_id)]}} -->
                                    <!-- {{partida.time_mandante_id}} -->
                                </div>
                                <div>
                                    X
                                </div>
                                <div id="visitante">
                                    {{partida.time_visitante_id}}
                                </div>
                            </div>
                        </div>
                    </div>
                </data-ng-show>
            </div>
        </div>
    </div>
</div>